apiVersion: batch/v1
kind: CronJob
metadata:
  name: tjrs-crawler
  namespace: crawlers
spec:
  schedule: "10 3 */2 * *"
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: crawler
            image: us-docker.pkg.dev/inspira-registry/docker/data/crawlers:${IMAGE_TAG}
            imagePullPolicy: IfNotPresent
            command: [ "/bin/bash", "-c" ]
            args:
            - python commands.py tjrs --output-uri gs://inspira-production-buckets-tjrs
            envFrom:
            - secretRef:
                name: crawler-env
            volumeMounts:
            - mountPath: "/etc/gcloud"
              name: gcp-credentials
          restartPolicy: Never
          volumes:
          - name: gcp-credentials
            secret:
              secretName: crawlers-credentials
